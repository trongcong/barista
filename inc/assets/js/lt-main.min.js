!function(){"use strict";const e={scrollToElement(e,a=500){e.length&&jQuery([document.documentElement,document.body]).animate({scrollTop:e.offset().top-50},a)},__addAjaxLoading(e,a){e.find(a).prepend('<div class="lds-ripple"><div></div><div></div></div>'),e.find(a).addClass("__is-inprogress")},__removeAjaxLoading(e,a){e.find(a).removeClass("__is-inprogress"),e.find(`${a} .lds-ripple`).remove()},isValidRequired(a,t){jQuery(a).find(".__err").remove();const n=jQuery(a).find(">span:nth-child(1)").length?jQuery(a).find(">span:nth-child(1)"):jQuery(a).find(">label>span:nth-child(1)");return!!t||(e.scrollToElement(jQuery(a)),n.after("<p class='__err'>This field is required</p>"),!1)},isValidMinMax(a,t,{min:n,max:i}){const r=jQuery(a).parents(".__lt-input");jQuery(r).find(".__err").remove();const l=jQuery(r).find(">span:nth-child(1)").length?jQuery(r).find(">span:nth-child(1)"):jQuery(r).find(">label>span:nth-child(1)");return!!t||(e.scrollToElement(jQuery(r)),n&&l.after(`<p class='__err'>Please upload at least ${n} files</p>`),i&&l.after(`<p class='__err'>Please upload at most ${i} files</p>`),!1)}},a=()=>{const a=jQuery(".__job-filter-wrap");if(!a.length)return;const t=a.find("form"),n=".__job-filter-content-side",i=t.attr("action"),r=(t.find('input[name="filter-title"]'),t.find('select[name="filter-location"]'),t.find('select[name="job-type"]'),t.find('select[name="job-compensation-types"]'),t.find('select[name="job-experience"]'),t.find(".btn-submit-filter")),l=a.find('.wrapper-fillter select[name="order-by"]'),o=a.find(".__job-filter-items-wrap"),s=a.find(".results-filter-wrapper"),c=a.find(".results-filter-wrapper .results-filter"),_=a.find(".wrapper-fillter .results-count"),d=()=>{const e=t.serializeArray(),a=l.val(),n=e.reduce(((e,a)=>(a.value&&(e[a.name]=a.value),e)),{});return a&&(n["order-by"]=a),n};t.on("submit",(t=>{t.preventDefault(),(async()=>{e.__addAjaxLoading(a,n),e.scrollToElement(o);try{const{items:t,found_posts:r,selected_filter:l}=await jQuery.ajax({type:"post",url:ajax_data.ajax_url,dataType:"json",data:{action:"lt_ajax_filter_jobs",security:ajax_data._ajax_nonce,filter_link:i,...d()}});_.text(`Showing ${r} results`),o.html(t),s.css("display",l?"block":"none"),c.html(l),e.__removeAjaxLoading(a,n)}catch(t){console.error(t),e.__removeAjaxLoading(a,n),alert("Have something error!")}})(),(()=>{const e=new URLSearchParams(d()),a=new URL(`${window.location.origin}${window.location.pathname}`);a.search=e.toString(),window.history.pushState({},"",a)})()})),t.add(l).on("change",(e=>{e.preventDefault(),t.trigger("submit")})),r.on("click",(e=>{e.preventDefault(),t.trigger("submit")}))};jQuery((function(t){console.log("lt ready"),t.fn.serializeFiles=function(){let e=t(this),a=new FormData,n=e.serializeArray();return t.each(e.find('input[type="file"]'),(function(e,n){t.each(t(n)[0].files,(function(e,t){a.append(n.name,t)}))})),t.each(n,(function(e,t){a.append(t.name,t.value)})),a};const n=async({...a},n,i)=>{const{training_certification:r,barista_skills:l,volumes:o,hospitality_skills:s,year_exp_min:c,year_exp_max:_,year_exp_aus_min:d,year_exp_aus_max:p}=a;n.data("object-filter",JSON.stringify(a)),e.__addAjaxLoading(n,i),e.scrollToElement(n);try{const{items:a,count:u}=await t.ajax({type:"post",url:ajax_data.ajax_url,dataType:"json",data:{action:"lt_ajax_filter_barista",security:ajax_data._ajax_nonce,training_certification:r,barista_skills:l,volumes:o,hospitality_skills:s,year_exp_min:c>_?_:c,year_exp_max:c>_?c:_,year_exp_aus_min:d>p?p:d,year_exp_aus_max:d>p?d:p}});n.find(".__lt-items-wrap").html(a),t(".__counter-result").text(`(${u} barista${u>1?"s":""})`),e.__removeAjaxLoading(n,i)}catch(a){console.error(a),e.__removeAjaxLoading(n,i)}},i=e=>{const a=e.find('.__lt-checkbox input[name="training_certification[]"]:checked'),n=e.find('.__lt-checkbox input[name="barista_skills[]"]:checked'),i=e.find('.__lt-checkbox input[name="volumes[]"]:checked'),r=e.find('.__lt-checkbox input[name="hospitality_skills[]"]:checked'),l=e.find('input[name="year_exp_min"]'),o=e.find('input[name="year_exp_max"]'),s=e.find('input[name="year_exp_aus_min"]'),c=e.find('input[name="year_exp_aus_max"]');return{training_certification:a.map(((e,a)=>t(a).val().trim())).get(),barista_skills:n.map(((e,a)=>t(a).val())).get(),volumes:i.map(((e,a)=>t(a).val())).get(),hospitality_skills:r.map(((e,a)=>t(a).val())).get(),year_exp_min:+l.val()||0,year_exp_max:+o.val()||10,year_exp_aus_min:+s.val()||0,year_exp_aus_max:+c.val()||10}},r=(e,a)=>{const t=e.data("object-filter");if(t){const e=(e=>{const{training_certification:a,barista_skills:t,volumes:n,hospitality_skills:i,year_exp_min:r,year_exp_max:l,year_exp_aus_min:o,year_exp_aus_max:s}=e;let c=0;return a?.length&&(c+=1),t?.length&&(c+=1),n?.length&&(c+=1),i?.length&&(c+=1),(r>.5||l<10)&&(c+=1),(o>.5||s<10)&&(c+=1),c})(JSON.parse(t));a.find(">span:nth-child(1)").html(e?`<span class="filters-counter">${e}</span>`:"")}},l=()=>{const e=t(".__listings-wrap").data("object-filter");if(!e)return;const a=JSON.parse(e);for(const e in a)if(a.hasOwnProperty(e)){const n=a[e];if("number"==typeof n||"string"==typeof n){const n=t(`[name="${e}"]`);n.val(a[e]),"range"===n.attr("type")&&n.trigger("input")}if(Array.isArray(n))if(n.length)for(const a of n)t(`[name="${e}[]"][value='${a}']`).prop("checked",!0);else t(`[name="${e}[]"]`).prop("checked",!1)}},o=()=>{const e=t(".__lt-filter-modal"),a=e.find(".__filter-popup-content"),n=t(".__show-filter-popup");e.find(".__lt-modal-close").on("click",(function(e){t(this).parents(".__lt-filter-modal").hide()})),a.on("click",(function(e){t(e.target).hasClass("__filter-popup-content")&&t(this).parents(".__lt-filter-modal").hide()})),n.on("click",(function(e){t(document).find(".__lt-filter-modal").show()}))},s=()=>{const a=t(".__lt-register-barista"),n=a.find(".__lt-btn-register"),i=a.find(".__required"),r=a.find('input[name="active_code"]'),l=".__lt-inner-register",o=a.find("form");r.on("change input",(function(e){t(this).val().length?n.attr("disabled",!1):n.attr("disabled",!0)})),n.on("click",(r=>{const s=a.find('input[type="file"]');for(let a=0;a<i.length;a++){const n=i[a];let r=!1;if(t(n).hasClass("__lt-input")?r=!(!t(n).find("input").val()?.trim()&&!t(n).find("textarea").val()?.trim()):t(n).hasClass("__lt-input-select")?r=!!t(n).find("select").val():t(n).hasClass("__lt-checkbox-group")&&(r=t(n).find('input[type="checkbox"]:checked').length>0),!e.isValidRequired(n,r))return}for(let a=0;a<s.length;a++){const n=s[a],i=t(n).attr("min");let r=!1;if(r=!i||i&&n.files.length>=+i,!e.isValidMinMax(n,r,{min:i}))return}(async()=>{e.__addAjaxLoading(a,l),e.scrollToElement(o);try{const i=o.serializeFiles();i.append("action","lt_ajax_create_new_barista"),i.append("security",ajax_data._ajax_nonce),i.append("type","create");const{items:r,...s}=await t.ajax({type:"post",url:ajax_data.ajax_url,dataType:"json",processData:!1,contentType:!1,data:i});o.trigger("reset"),e.__removeAjaxLoading(a,l),n.attr("disabled",!0),window.location.href=s.url}catch(t){console.error(t),e.__removeAjaxLoading(a,l),ajax_data.barista_profile_url?!0===confirm(t.responseJSON.data)&&(window.location.href=ajax_data.barista_profile_url):alert(t.responseJSON.data)}})()}))},c=()=>{const a=t(".__lt-create-job"),n=a.find(".__lt-btn-create"),i=a.find(".__required"),r=".__lt-inner-create-job",l=a.find("form");n.on("click",(n=>{for(let a=0;a<i.length;a++){const n=i[a];let r=!1;if(t(n).hasClass("__lt-input")?r=!(!t(n).find("input").val()?.trim()&&!t(n).find("textarea").val()?.trim()):t(n).hasClass("__lt-input-select")?r=!!t(n).find("select").val():t(n).hasClass("__lt-checkbox-group")&&(r=t(n).find('input[type="checkbox"]:checked').length>0),!e.isValidRequired(n,r))return}(async()=>{e.__addAjaxLoading(a,r),e.scrollToElement(l);try{const n=l.serializeFiles();n.append("action","lt_ajax_create_new_job"),n.append("security",ajax_data._ajax_nonce),n.append("type","create");const{items:i,...o}=await t.ajax({type:"post",url:ajax_data.ajax_url,dataType:"json",processData:!1,contentType:!1,data:n});l.trigger("reset"),e.__removeAjaxLoading(a,r),window.location.href=o.url}catch(t){console.error(t),e.__removeAjaxLoading(a,r),alert("Have something error!")}})()}))},_=()=>{const e=t(".__contact-item").find("a");e.on("click",(e=>{(async()=>{try{await t.ajax({type:"post",url:ajax_data.ajax_url,dataType:"json",data:{action:"lt_ajax_contact_action",security:ajax_data._ajax_nonce,id:ajax_data.post_id}})}catch(e){console.error(e)}})()}))},d=(e,a)=>{const t=e.querySelectorAll("input"),n=parseFloat(t[0].min),i=parseFloat(t[0].max);let r=parseFloat(t[0].value),l=parseFloat(t[1].value);const o=r/(i-n)*100-n/i*100-n,s=l/(i-n)*100-n/i*100-n;if(console.log(o,s,i,n),e.style.setProperty("--range-slider-value-low",o),e.style.setProperty("--range-slider-value-high",s>l*(100/i)?l*(100/i):s),r>l){const e=l;l=r,r=e,a?.currentTarget===t[0]?t[0].insertAdjacentElement("beforebegin",t[1]):t[1].insertAdjacentElement("afterend",t[0])}e.querySelector(".__lt-range-slider__display").setAttribute("data-low",r),e.querySelector(".__lt-range-slider__display").setAttribute("data-high",l)},p=()=>{const e=async(e,a)=>{const n={action:"lt_ajax_barista_action",security:ajax_data._ajax_nonce,id:ajax_data.post_id,[e]:a};await(async e=>{try{await t.ajax({type:"post",url:ajax_data.ajax_url,dataType:"json",data:e}),window.location.reload()}catch(e){console.error(e)}})(n)};t('input[name="had_a_job"]').on("change",(async function(a){const n=t(this).is(":checked");await e("had_a_job",n)})),t('input[name="hide_profile"]').on("change",(async function(a){const n=t(this).is(":checked");await e("hide_profile",n)}))};t(document).ready((function(){document.querySelectorAll(".__lt-range-slider").forEach((e=>e.querySelectorAll("input").forEach((a=>{"range"===a.type&&(a.oninput=a=>d(e,a),d(e))})))),(()=>{const e=t(".__listings-wrap"),a=t(".__lt-filter-modal"),o=e.find(".__show-filter-popup"),s=e.find('.__lt-checkbox input[type="checkbox"]'),c=e.find('.__lt-input input[type="number"]'),_=e.find('.__lt-range-slider input[type="range"]'),d=a.find('.__lt-checkbox input[type="checkbox"]'),p=a.find('.__lt-input input[type="number"]'),u=a.find('.__lt-range-slider input[type="range"]'),f=".__lt-inner-wrap";s.add(c).add(_).on("change",(function(a){n(i(e),e,f),r(e,o),l()})),d.add(p).add(u).on("change",(function(t){n(i(a),e,f),r(e,o),l()}))})(),s(),c(),_(),o(),(()=>{const e='.um-account-side [data-tab="profile_barista"]';if(ajax_data.barista_profile_url){const a=ajax_data.barista_profile_url;t(document).find(e).attr("href",a),t(document).find(e).on("click",(function(){window.location.href=a}))}})(),a(),p()})),t(window).on("load",(()=>{})),t(window).on("load resize ready",(()=>{})),t(window).on("scroll",(()=>{}))}))}();