jQuery((function(e){"use strict";console.log("lt ready"),e.fn.serializeFiles=function(){let t=e(this),a=new FormData,n=t.serializeArray();return e.each(t.find('input[type="file"]'),(function(t,n){e.each(e(n)[0].files,(function(e,t){a.append(n.name,t)}))})),e.each(n,(function(e,t){a.append(t.name,t.value)})),a};const t=(t,a=500)=>{t.length&&e([document.documentElement,document.body]).animate({scrollTop:t.offset().top-50},a)},a=(e,t)=>{e.find(t).prepend('<div class="lds-ripple"><div></div><div></div></div>'),e.find(t).addClass("__is-inprogress")},n=(e,t)=>{e.find(t).removeClass("__is-inprogress"),e.find(`${t} .lds-ripple`).remove()},i=(a,n)=>{e(a).find(".__err").remove();const i=e(a).find(">span:nth-child(1)").length?e(a).find(">span:nth-child(1)"):e(a).find(">label>span:nth-child(1)");return!!n||(t(e(a)),i.after("<p class='__err'>This field is required</p>"),!1)},r=async({...i},r,l)=>{const{training_certification:s,barista_skills:o,volumes:_,hospitality_skills:c,year_exp_min:d,year_exp_max:p,year_exp_aus_min:u,year_exp_aus_max:f}=i;r.data("object-filter",JSON.stringify(i)),a(r,l),t(r);try{const{items:t,count:a}=await e.ajax({type:"post",url:ajax_data.ajax_url,dataType:"json",data:{action:"lt_ajax_filter_barista",security:ajax_data._ajax_nonce,training_certification:s,barista_skills:o,volumes:_,hospitality_skills:c,year_exp_min:d>p?p:d,year_exp_max:d>p?d:p,year_exp_aus_min:u>f?f:u,year_exp_aus_max:u>f?u:f}});r.find(".__lt-items-wrap").html(t),e(".__counter-result").text(`(${a} barista${a>1?"s":""})`),n(r,l)}catch(e){console.error(e),n(r,l)}},l=t=>{const a=t.find('.__lt-checkbox input[name="training_certification[]"]:checked'),n=t.find('.__lt-checkbox input[name="barista_skills[]"]:checked'),i=t.find('.__lt-checkbox input[name="volumes[]"]:checked'),r=t.find('.__lt-checkbox input[name="hospitality_skills[]"]:checked'),l=t.find('input[name="year_exp_min"]'),s=t.find('input[name="year_exp_max"]'),o=t.find('input[name="year_exp_aus_min"]'),_=t.find('input[name="year_exp_aus_max"]');return{training_certification:a.map(((t,a)=>e(a).val().trim())).get(),barista_skills:n.map(((t,a)=>e(a).val())).get(),volumes:i.map(((t,a)=>e(a).val())).get(),hospitality_skills:r.map(((t,a)=>e(a).val())).get(),year_exp_min:+l.val()||0,year_exp_max:+s.val()||10,year_exp_aus_min:+o.val()||0,year_exp_aus_max:+_.val()||10}},s=(e,t)=>{const a=e.data("object-filter");if(a){const e=(e=>{const{training_certification:t,barista_skills:a,volumes:n,hospitality_skills:i,year_exp_min:r,year_exp_max:l,year_exp_aus_min:s,year_exp_aus_max:o}=e;let _=0;return t?.length&&(_+=1),a?.length&&(_+=1),n?.length&&(_+=1),i?.length&&(_+=1),(r>.5||l<10)&&(_+=1),(s>.5||o<10)&&(_+=1),_})(JSON.parse(a));t.find(">span:nth-child(1)").html(e?`<span class="filters-counter">${e}</span>`:"")}},o=()=>{const t=e(".__listings-wrap").data("object-filter");if(!t)return;const a=JSON.parse(t);for(const t in a)if(a.hasOwnProperty(t)){const n=a[t];if("number"==typeof n||"string"==typeof n){const n=e(`[name="${t}"]`);n.val(a[t]),"range"===n.attr("type")&&n.trigger("input")}if(Array.isArray(n))if(n.length)for(const a of n)e(`[name="${t}[]"][value='${a}']`).prop("checked",!0);else e(`[name="${t}[]"]`).prop("checked",!1)}},_=()=>{const t=e(".__lt-filter-modal"),a=t.find(".__filter-popup-content"),n=e(".__show-filter-popup");t.find(".__lt-modal-close").on("click",(function(t){e(this).parents(".__lt-filter-modal").hide()})),a.on("click",(function(t){e(t.target).hasClass("__filter-popup-content")&&e(this).parents(".__lt-filter-modal").hide()})),n.on("click",(function(t){e(document).find(".__lt-filter-modal").show()}))},c=()=>{const r=e(".__lt-register-barista"),l=r.find(".__lt-btn-register"),s=r.find(".__required"),o=r.find('input[name="active_code"]'),_=".__lt-inner-register",c=r.find("form");o.on("change input",(function(t){e(this).val().length?l.attr("disabled",!1):l.attr("disabled",!0)})),l.on("click",(o=>{for(let t=0;t<s.length;t++){const a=s[t];let n=!1;if(e(a).hasClass("__lt-input")?n=!(!e(a).find("input").val()?.trim()&&!e(a).find("textarea").val()?.trim()):e(a).hasClass("__lt-input-select")?n=!!e(a).find("select").val():e(a).hasClass("__lt-checkbox-group")&&(n=e(a).find('input[type="checkbox"]:checked').length>0),!i(a,n))return}(async()=>{a(r,_),t(c);try{const t=c.serializeFiles();t.append("action","lt_ajax_create_new_barista"),t.append("security",ajax_data._ajax_nonce),t.append("type","create");const{items:a,...i}=await e.ajax({type:"post",url:ajax_data.ajax_url,dataType:"json",processData:!1,contentType:!1,data:t});c.trigger("reset"),n(r,_),l.attr("disabled",!0),window.location.href=i.url}catch(e){console.error(e),n(r,_),ajax_data.barista_profile_url?!0===confirm(e.responseJSON.data)&&(window.location.href=ajax_data.barista_profile_url):alert(e.responseJSON.data)}})()}))},d=()=>{const r=e(".__lt-create-job"),l=r.find(".__lt-btn-create"),s=r.find(".__required"),o=".__lt-inner-create-job",_=r.find("form");l.on("click",(l=>{for(let t=0;t<s.length;t++){const a=s[t];let n=!1;if(e(a).hasClass("__lt-input")?n=!(!e(a).find("input").val()?.trim()&&!e(a).find("textarea").val()?.trim()):e(a).hasClass("__lt-input-select")?n=!!e(a).find("select").val():e(a).hasClass("__lt-checkbox-group")&&(n=e(a).find('input[type="checkbox"]:checked').length>0),!i(a,n))return}(async()=>{a(r,o),t(_);try{const t=_.serializeFiles();t.append("action","lt_ajax_create_new_job"),t.append("security",ajax_data._ajax_nonce),t.append("type","create");const{items:a,...i}=await e.ajax({type:"post",url:ajax_data.ajax_url,dataType:"json",processData:!1,contentType:!1,data:t});_.trigger("reset"),n(r,o),window.location.href=i.url}catch(e){console.error(e),n(r,o),alert("Have something error!")}})()}))},p=()=>{const t=e(".__contact-item").find("a");t.on("click",(t=>{(async()=>{try{await e.ajax({type:"post",url:ajax_data.ajax_url,dataType:"json",data:{action:"lt_ajax_contact_action",security:ajax_data._ajax_nonce,id:ajax_data.post_id}})}catch(e){console.error(e)}})()}))},u=(e,t)=>{const a=e.querySelectorAll("input"),n=parseFloat(a[0].min),i=parseFloat(a[0].max);let r=parseFloat(a[0].value),l=parseFloat(a[1].value);const s=r/(i-n)*100-5,o=l/(i-n)*100;if(e.style.setProperty("--range-slider-value-low",s),e.style.setProperty("--range-slider-value-high",o>10*l?10*l:o),r>l){const e=l;l=r,r=e,t?.currentTarget===a[0]?a[0].insertAdjacentElement("beforebegin",a[1]):a[1].insertAdjacentElement("afterend",a[0])}e.querySelector(".__lt-range-slider__display").setAttribute("data-low",r),e.querySelector(".__lt-range-slider__display").setAttribute("data-high",l)};e(document).ready((function(){document.querySelectorAll(".__lt-range-slider").forEach((e=>e.querySelectorAll("input").forEach((t=>{"range"===t.type&&(t.oninput=t=>u(e,t),u(e))})))),(()=>{const t=e(".__listings-wrap"),a=e(".__lt-filter-modal"),n=t.find(".__show-filter-popup"),i=t.find('.__lt-checkbox input[type="checkbox"]'),_=t.find('.__lt-input input[type="number"]'),c=t.find('.__lt-range-slider input[type="range"]'),d=a.find('.__lt-checkbox input[type="checkbox"]'),p=a.find('.__lt-input input[type="number"]'),u=a.find('.__lt-range-slider input[type="range"]'),f=".__lt-inner-wrap";i.add(_).add(c).on("change",(function(e){r(l(t),t,f),s(t,n),o()})),d.add(p).add(u).on("change",(function(e){r(l(a),t,f),s(t,n),o()}))})(),c(),d(),p(),_(),(()=>{const t='.um-account-side [data-tab="profile_barista"]';if(ajax_data.barista_profile_url){const a=ajax_data.barista_profile_url;e(document).find(t).attr("href",a),e(document).find(t).on("click",(function(){window.location.href=a}))}})()})),e(window).on("load",(()=>{})),e(window).on("load resize ready",(()=>{})),e(window).on("scroll",(()=>{}))}));