"use strict";const e={scrollToElement(e,t=500){e.length&&jQuery([document.documentElement,document.body]).animate({scrollTop:e.offset().top-50},t)},__addAjaxLoading(e,t){e.find(t).prepend('<div class="lds-ripple"><div></div><div></div></div>'),e.find(t).addClass("__is-inprogress")},__removeAjaxLoading(e,t){e.find(t).removeClass("__is-inprogress"),e.find(`${t} .lds-ripple`).remove()},isValidRequired(t,a){jQuery(t).find(".__err").remove();const n=jQuery(t).find(">span:nth-child(1)").length?jQuery(t).find(">span:nth-child(1)"):jQuery(t).find(">label>span:nth-child(1)");return!!a||(e.scrollToElement(jQuery(t)),n.after("<p class='__err'>This field is required</p>"),!1)}},t=()=>{const t=jQuery(".__job-filter-wrap");if(!t.length)return;const a=t.find("form"),n=".__job-filter-content-side",i=a.attr("action"),r=(a.find('input[name="filter-title"]'),a.find('select[name="filter-location"]'),a.find('select[name="job-type"]'),a.find('select[name="job-compensation-types"]'),a.find('select[name="job-experience"]'),a.find(".btn-submit-filter")),l=t.find('.wrapper-fillter select[name="order-by"]'),o=t.find(".__job-filter-items-wrap"),s=t.find(".results-filter-wrapper"),_=t.find(".results-filter-wrapper .results-filter"),c=t.find(".wrapper-fillter .results-count"),d=()=>{const e=a.serializeArray(),t=l.val(),n=e.reduce(((e,t)=>(t.value&&(e[t.name]=t.value),e)),{});return t&&(n["order-by"]=t),n};a.on("submit",(a=>{a.preventDefault(),(async()=>{e.__addAjaxLoading(t,n),e.scrollToElement(o);try{const{items:a,found_posts:r,selected_filter:l}=await jQuery.ajax({type:"post",url:ajax_data.ajax_url,dataType:"json",data:{action:"lt_ajax_filter_jobs",security:ajax_data._ajax_nonce,filter_link:i,...d()}});c.text(`Showing ${r} results`),o.html(a),s.css("display",l?"block":"none"),_.html(l),e.__removeAjaxLoading(t,n)}catch(a){console.error(a),e.__removeAjaxLoading(t,n),alert("Have something error!")}})(),(()=>{const e=new URLSearchParams(d()),t=new URL(`${window.location.origin}${window.location.pathname}`);t.search=e.toString(),window.history.pushState({},"",t)})()})),a.add(l).on("change",(e=>{e.preventDefault(),a.trigger("submit")})),r.on("click",(e=>{e.preventDefault(),a.trigger("submit")}))};jQuery((function(a){console.log("lt ready"),a.fn.serializeFiles=function(){let e=a(this),t=new FormData,n=e.serializeArray();return a.each(e.find('input[type="file"]'),(function(e,n){a.each(a(n)[0].files,(function(e,a){t.append(n.name,a)}))})),a.each(n,(function(e,a){t.append(a.name,a.value)})),t};const n=async({...t},n,i)=>{const{training_certification:r,barista_skills:l,volumes:o,hospitality_skills:s,year_exp_min:_,year_exp_max:c,year_exp_aus_min:d,year_exp_aus_max:p}=t;n.data("object-filter",JSON.stringify(t)),e.__addAjaxLoading(n,i),e.scrollToElement(n);try{const{items:t,count:u}=await a.ajax({type:"post",url:ajax_data.ajax_url,dataType:"json",data:{action:"lt_ajax_filter_barista",security:ajax_data._ajax_nonce,training_certification:r,barista_skills:l,volumes:o,hospitality_skills:s,year_exp_min:_>c?c:_,year_exp_max:_>c?_:c,year_exp_aus_min:d>p?p:d,year_exp_aus_max:d>p?d:p}});n.find(".__lt-items-wrap").html(t),a(".__counter-result").text(`(${u} barista${u>1?"s":""})`),e.__removeAjaxLoading(n,i)}catch(t){console.error(t),e.__removeAjaxLoading(n,i)}},i=e=>{const t=e.find('.__lt-checkbox input[name="training_certification[]"]:checked'),n=e.find('.__lt-checkbox input[name="barista_skills[]"]:checked'),i=e.find('.__lt-checkbox input[name="volumes[]"]:checked'),r=e.find('.__lt-checkbox input[name="hospitality_skills[]"]:checked'),l=e.find('input[name="year_exp_min"]'),o=e.find('input[name="year_exp_max"]'),s=e.find('input[name="year_exp_aus_min"]'),_=e.find('input[name="year_exp_aus_max"]');return{training_certification:t.map(((e,t)=>a(t).val().trim())).get(),barista_skills:n.map(((e,t)=>a(t).val())).get(),volumes:i.map(((e,t)=>a(t).val())).get(),hospitality_skills:r.map(((e,t)=>a(t).val())).get(),year_exp_min:+l.val()||0,year_exp_max:+o.val()||10,year_exp_aus_min:+s.val()||0,year_exp_aus_max:+_.val()||10}},r=(e,t)=>{const a=e.data("object-filter");if(a){const e=(e=>{const{training_certification:t,barista_skills:a,volumes:n,hospitality_skills:i,year_exp_min:r,year_exp_max:l,year_exp_aus_min:o,year_exp_aus_max:s}=e;let _=0;return t?.length&&(_+=1),a?.length&&(_+=1),n?.length&&(_+=1),i?.length&&(_+=1),(r>.5||l<10)&&(_+=1),(o>.5||s<10)&&(_+=1),_})(JSON.parse(a));t.find(">span:nth-child(1)").html(e?`<span class="filters-counter">${e}</span>`:"")}},l=()=>{const e=a(".__listings-wrap").data("object-filter");if(!e)return;const t=JSON.parse(e);for(const e in t)if(t.hasOwnProperty(e)){const n=t[e];if("number"==typeof n||"string"==typeof n){const n=a(`[name="${e}"]`);n.val(t[e]),"range"===n.attr("type")&&n.trigger("input")}if(Array.isArray(n))if(n.length)for(const t of n)a(`[name="${e}[]"][value='${t}']`).prop("checked",!0);else a(`[name="${e}[]"]`).prop("checked",!1)}},o=()=>{const e=a(".__lt-filter-modal"),t=e.find(".__filter-popup-content"),n=a(".__show-filter-popup");e.find(".__lt-modal-close").on("click",(function(e){a(this).parents(".__lt-filter-modal").hide()})),t.on("click",(function(e){a(e.target).hasClass("__filter-popup-content")&&a(this).parents(".__lt-filter-modal").hide()})),n.on("click",(function(e){a(document).find(".__lt-filter-modal").show()}))},s=()=>{const t=a(".__lt-register-barista"),n=t.find(".__lt-btn-register"),i=t.find(".__required"),r=t.find('input[name="active_code"]'),l=".__lt-inner-register",o=t.find("form");r.on("change input",(function(e){a(this).val().length?n.attr("disabled",!1):n.attr("disabled",!0)})),n.on("click",(r=>{for(let t=0;t<i.length;t++){const n=i[t];let r=!1;if(a(n).hasClass("__lt-input")?r=!(!a(n).find("input").val()?.trim()&&!a(n).find("textarea").val()?.trim()):a(n).hasClass("__lt-input-select")?r=!!a(n).find("select").val():a(n).hasClass("__lt-checkbox-group")&&(r=a(n).find('input[type="checkbox"]:checked').length>0),!e.isValidRequired(n,r))return}(async()=>{e.__addAjaxLoading(t,l),e.scrollToElement(o);try{const i=o.serializeFiles();i.append("action","lt_ajax_create_new_barista"),i.append("security",ajax_data._ajax_nonce),i.append("type","create");const{items:r,...s}=await a.ajax({type:"post",url:ajax_data.ajax_url,dataType:"json",processData:!1,contentType:!1,data:i});o.trigger("reset"),e.__removeAjaxLoading(t,l),n.attr("disabled",!0),window.location.href=s.url}catch(a){console.error(a),e.__removeAjaxLoading(t,l),ajax_data.barista_profile_url?!0===confirm(a.responseJSON.data)&&(window.location.href=ajax_data.barista_profile_url):alert(a.responseJSON.data)}})()}))},_=()=>{const t=a(".__lt-create-job"),n=t.find(".__lt-btn-create"),i=t.find(".__required"),r=".__lt-inner-create-job",l=t.find("form");n.on("click",(n=>{for(let t=0;t<i.length;t++){const n=i[t];let r=!1;if(a(n).hasClass("__lt-input")?r=!(!a(n).find("input").val()?.trim()&&!a(n).find("textarea").val()?.trim()):a(n).hasClass("__lt-input-select")?r=!!a(n).find("select").val():a(n).hasClass("__lt-checkbox-group")&&(r=a(n).find('input[type="checkbox"]:checked').length>0),!e.isValidRequired(n,r))return}(async()=>{e.__addAjaxLoading(t,r),e.scrollToElement(l);try{const n=l.serializeFiles();n.append("action","lt_ajax_create_new_job"),n.append("security",ajax_data._ajax_nonce),n.append("type","create");const{items:i,...o}=await a.ajax({type:"post",url:ajax_data.ajax_url,dataType:"json",processData:!1,contentType:!1,data:n});l.trigger("reset"),e.__removeAjaxLoading(t,r),window.location.href=o.url}catch(a){console.error(a),e.__removeAjaxLoading(t,r),alert("Have something error!")}})()}))},c=()=>{const e=a(".__contact-item").find("a");e.on("click",(e=>{(async()=>{try{await a.ajax({type:"post",url:ajax_data.ajax_url,dataType:"json",data:{action:"lt_ajax_contact_action",security:ajax_data._ajax_nonce,id:ajax_data.post_id}})}catch(e){console.error(e)}})()}))},d=(e,t)=>{const a=e.querySelectorAll("input"),n=parseFloat(a[0].min),i=parseFloat(a[0].max);let r=parseFloat(a[0].value),l=parseFloat(a[1].value);const o=r/(i-n)*100-5,s=l/(i-n)*100;if(e.style.setProperty("--range-slider-value-low",o),e.style.setProperty("--range-slider-value-high",s>10*l?10*l:s),r>l){const e=l;l=r,r=e,t?.currentTarget===a[0]?a[0].insertAdjacentElement("beforebegin",a[1]):a[1].insertAdjacentElement("afterend",a[0])}e.querySelector(".__lt-range-slider__display").setAttribute("data-low",r),e.querySelector(".__lt-range-slider__display").setAttribute("data-high",l)};a(document).ready((function(){document.querySelectorAll(".__lt-range-slider").forEach((e=>e.querySelectorAll("input").forEach((t=>{"range"===t.type&&(t.oninput=t=>d(e,t),d(e))})))),(()=>{const e=a(".__listings-wrap"),t=a(".__lt-filter-modal"),o=e.find(".__show-filter-popup"),s=e.find('.__lt-checkbox input[type="checkbox"]'),_=e.find('.__lt-input input[type="number"]'),c=e.find('.__lt-range-slider input[type="range"]'),d=t.find('.__lt-checkbox input[type="checkbox"]'),p=t.find('.__lt-input input[type="number"]'),u=t.find('.__lt-range-slider input[type="range"]'),f=".__lt-inner-wrap";s.add(_).add(c).on("change",(function(t){n(i(e),e,f),r(e,o),l()})),d.add(p).add(u).on("change",(function(a){n(i(t),e,f),r(e,o),l()}))})(),s(),_(),c(),o(),(()=>{const e='.um-account-side [data-tab="profile_barista"]';if(ajax_data.barista_profile_url){const t=ajax_data.barista_profile_url;a(document).find(e).attr("href",t),a(document).find(e).on("click",(function(){window.location.href=t}))}})(),t()})),a(window).on("load",(()=>{})),a(window).on("load resize ready",(()=>{})),a(window).on("scroll",(()=>{}))}));